### <a name="_b7urdng99y53"></a>**Название задачи: Обеспечение кол-центров (банка и партнёра) актуальными ставками по депозитам**  

### <a name="_hjk0fkfyohdk"></a>**Автор: Анушервон Сатторов**  

### <a name="_uanumrh8zrui"></a>**Дата: 15.07.2025**

### <a name="_3bfxc9a45514"></a>**Функциональные требования**

| **№** | **Действующие лица или системы**                | **Use Case**                                   | **Описание (пошагово)**                                                                                                          |
| :---: | ----------------------------------------------- | ---------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------- |
| UC1   | Оператор внутреннего кол-центра, CRM, Rate API  | Запрос актуальной ставки по телефону           | 1. Оператор открывает карточку клиента в CRM.
                                                                                                             2. CRM делает REST-запрос в `Rate Service`.
                                                                                                             3. `Rate Service` возвращает перечень депозитов и текущие
                                                                                                             ставки.
                                                                                                             4. Оператор озвучивает клиенту условия. |
| UC2   | Сервис экспорта ставок, БД ставок, SFTP-шлюз     | Генерация файла ставок для партнёра            | 1. По расписанию job запрашивает актуальные ставки из БД
                                                                                                              2. Формирует CSV/JSON-файл с контрольной суммой.
                                                                                                              3. Отправлям по SMTP на их почту. |
| UC3   | Партнёрский кол-центр, SFTP-клиент              | Получение файла ставок                         | 1. Партнёр забирает файл из почты.
                                                                                                             2. Импортирует данные в свою систему.
                                                                                                             3. Операторы партнёра используют ставки при консультациях. |
| UC4   | Сервис ставок, Back-office                     | Обновление ставок банком                       | 1. Сотрудник Депозитного отдела создаёт или редактирует
                                                                                                            ставку в back-office
                                                                                                            2. `Rate service` следит за обновлениями и фиксирует их. |

---

### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**

|**№**|**Требование**|
| NF1 | Партнёрская компания не может делать запросы к нашему сервису             
| NF2 | ABS не может работать с Kafka
| +R  | + Ограничения (Restrictions)                                                                   |              
| +R2 | При доработках во всех системах нужно как можно больше использовать технологии,                |              
|     | которые уже есть в банке Можно развернуть новые технологии, но необходимо, чтобы               |              
|     | они были совместимы с существующими платформами разработки. Также желательно, чтобы            |              
|     | внутри банка уже была экспертиза — сотрудники понимали новые технологии хотя бы на             |             
|     | уровне языков программирования.                                                                |              
| +R3 | При использованни брокеров нужно использовать Kafka                                            |              

---
### <a name="_qmphm5d6rvi3"></a>**Решение**
Приведите диаграммы контекста и контейнеров в модели C4. Опишите там основные компоненты и интеграции всех элементов решения.

Диаграмма контекста - ./Context.puml
Диаграмма контейнеров - ./Container.puml

При разработке мы маскимально использовали технологии с которыми знакома компания так как это тербование +R2
Учитывали требование партнёра о том что не могут они делать запросы к нам поэтомы мы отправляем им решения файлами
Также ABS не поддерживает Kafka поэтому из системы убрана использование Kafka


### <a name="_bjrr7veeh80c"></a>**Альтернативы**
Опишите здесь наиболее важные альтернативные решения.

1. Могли систему рейта напрямую внедрить в АБС, но лучше разделить на отдельный сервис
2. Хотели использовать Kafka для публикации событий чтобы не поллить изменения, но из за ограничений ABS передумали

**Недостатки, ограничения, риски**

Подробно опишите здесь недостатки, ограничения и риски выбранного решения.

1. Система рейтов поллит данные о ставках, что неудобно
