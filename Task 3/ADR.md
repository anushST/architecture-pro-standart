### <a name="_b7urdng99y53"></a>**Название задачи: MVP для банка** 
### <a name="_hjk0fkfyohdk"></a>**Автор: Анушервон Сатторов**
### <a name="_uanumrh8zrui"></a>**Дата: 15.07.2025**
### <a name="_3bfxc9a45514"></a>**Функциональные требования**
|**№** |    **Действующие лица или системы**    |**Use Case**                                          |                         **Описание**                           |
|------|----------------------------------------|------------------------------------------------------|----------------------------------------------------------------|
| UC1  |Гость, Сайт                             |Просмотр депозитов (сайт)                             | 1. Гость открывает страницу «Депозиты».                        |
                                                                                                         2. Сайт запрашивает актуальные ставки.                         |
                                                                                                         3. Гость видит перечень депозитов и ставок.                    |
| UC2  |Гость, Сайт, SMS-шлюз                   |Подача заявки на депозит (сайт)                       | 1. Гость нажимает «Открыть депозит».                           |
                                                                                                         2. Заполняет Ф. И. О. и телефон.                               |
                                                                                                         3. Сайт фиксирует заявку и оператор звонит чтоб                |
                                                                                                         клиет прошёл идентификацию.                                    |
| UC3  |Клиент, Интернет-банк                   |Просмотр депозитов (интернет-банк)                    | 1. Клиент авторизуется.                                        |
                                                                                                         2. Система запрашивает как общие, так и персональные ставки.   |
                                                                                                         3. Клиент видит список продуктов и персонализированные         |
                                                                                                         ставки.                                                        |
| UC4  |Клиент, Интернет-банк, SMS-шлюз         |Оформление депозита (интернет-банк)                   | 1. Клиент выбирает счёт и сумму.                               |
                                                                                                         2. Нажимает «Открыть».                                         |
                                                                                                         3. Получает СМС-код, вводит его.                               |
                                                                                                         4. Заявка регистрируется для обработки менеджером.             |
| UC5  |Сотрудники деп/кредит отдела, АБС       |Учёт ставок депозитов в АБС                           | 1. Сотрудник открывает модуль ставок.                          |
                                                                                                         2. Создаёт или изменяет запись о ставке.                       |
                                                                                                         3. Данные доступны другим отделам и фронтам.                   |
| UC6  |Менеджер бэк-офиса, АБС, SMS-шлюз       |Обработка депозитной заявки                           | 1. Менеджер находит заявку из интернет-банка.                  |
                                                                                                         2. Подтверждает условия в АБС.                                 |
                                                                                                         3. Система отправляет клиенту СМС о ставке и факте открытия    |
                                                                                                         депозита.                                                      |
| UC7 |Сервис уведомлений, Клиент, SMS-шлюз    |СМС-оповещения о статусе заявки                       | 1. Изменился статус заявки в системе.                          |
                                                                                                         2. Сервис уведомлений формирует сообщение.                     |
                                                                                                         3. SMS-шлюз отправляет клиенту уведомление.                    |
|||||
### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**
Опишите здесь нефункциональные требования и архитектурно значимые требования.

|**№**|**Требование**|
| R   | Надёжность (Reliability)                                                                       |              |
| R1  | Защищать данные при передаче с помощью механизма шифорвания для сайта                          |              |
| R2  | Защищать данные при передаче с помощью механизма шифорвания для интернет-банка                 |              |
| R3  | Все сервисы должны работать 24/7 и быть доступны в 99,9% случаев                               |              |
| R4  | Систему кредитного скоринга в рабочие часы нужно нагружать дополнительными процессами          |              |
|     | по предрасчётом скорингов                                                                      |              |
| P   | Производительность (Performance)                                                               |              |
| P1  | Отклик по всем операциям должен быть максимально быстрым и занимать миллисекунды               |              |
| P2  | Предусмотреть равномерное горизонтальное масштабирование и распределение запросов              |              |
|     | между серверами, приложениями и ЦОД
| S   | Поддерживаемость (Supportability)                                                              |              |
| S3  | Перевести интернет-банк на микросервисы, только функционал по депозитам                        |              |
| +R  | + Ограничения (Restrictions)                                                                   |              |
| +R2 | При доработках во всех системах нужно как можно больше использовать технологии,                |              |
|     | которые уже есть в банке Можно развернуть новые технологии, но необходимо, чтобы               |              |
|     | они были совместимы с существующими платформами разработки. Также желательно, чтобы            |              |
|     | внутри банка уже была экспертиза — сотрудники понимали новые технологии хотя бы на             |              |
|     | уровне языков программирования.                                                                |              |
| +R3 | При использованни брокеров нужно использовать Kafka                                            |              |
| +R4 | Нужно придерживаться системы дизайна для приложений, которая принята в компании.               |              |
| +R5 | Пока требование об круглосутчной доступности пока невыполнимы                                  |              |
| +R6 | АБС может масштрабироватся только вертикально из-за своей базы                                 |              |
| +R7 | Для новых клиентов можно использовать только общие данные бюро кредитных историй               |              |
| +R8 | Ожидается, что заявки по предодобренным кредитам будут обрабатываться в тот же день,           |              |
|     | хотя сейчас они поступают из АБС в Кредитный конвейер раз в сутки и ускорить обмен             |              |
|     | невозможно.                                                                                    |              |
|||
### <a name="_qmphm5d6rvi3"></a>**Решение**
Приведите диаграммы контекста и контейнеров в модели C4. Опишите там основные компоненты и интеграции всех элементов решения.

Диаграмма контекста - ./Context.puml
Диаграмма контейнеров - ./Container.puml

При разработке мы маскимально использовали технологии с которыми знакома компания так как это тербование +R2
Поэтому старые системы Интернет банкинга и сайта можно доработать и добавить новый функционал.
Использовали Kafka для того чтобы отправлять события об отправке SMS туда, а потом SMS шлюз их обработал, для большей надёжности.
Использовали балансировщик нагрузки чтобы мы могли горизонтально масштабироват нашу систему. Но не отразили её в диаграмме контейнеров так как потом было бы трудно разобратся кто куда отправляет запросы. Но она есть и все запросы к сервисам проходят через него

### <a name="_bjrr7veeh80c"></a>**Альтернативы**
Опишите здесь наиболее важные альтернативные решения.

1. Хотели обойтись без балансировкщика нагрузки и масштабировать всё горизонтально, но возникли бы трудности в дальнейшем
2. Не использовать Kafka на данном этапы, а реализовать мини-сервис внутри шлюза для ассинхронной обработки. Не одобрили так как будет меньшая отказоустойчивость

**Недостатки, ограничения, риски**

Подробно опишите здесь недостатки, ограничения и риски выбранного решения.

1. Сильная зависимость от старых технологий компанни, которая мешает масштабированию
2. АБС не масштабируется горизонтально
3. По возможности добавить два провайдера SMS для отказаустойчивости
4. Теперь нужно иметь команду по DevOps для работы с новой инфраструктурой
5. Сервисы шифруют данные при передаче, что снижает производительность
